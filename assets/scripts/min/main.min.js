var app=angular.module("app",["ui.router","angles"]);app.config(["$urlRouterProvider","$stateProvider","$httpProvider","$compileProvider",function(e,t,n,r){pages.forEach(function(e){t.state(e.name,{url:"/"+e.name,templateUrl:"assets/templates/"+e.name+".html",controller:e.name+"Ctrl"})}),n.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8";var i=function(e){var t,n,r,o,a,s,c,l="";for(t in e)if(n=e[t],n instanceof Array)for(c=0;c<n.length;++c)a=n[c],r=t+"["+c+"]",s={},s[r]=a,l+=i(s)+"&";else if(n instanceof Object)for(o in n)a=n[o],r=t+"["+o+"]",s={},s[r]=a,l+=i(s)+"&";else void 0!==n&&null!==n&&(l+=encodeURIComponent(t)+"="+encodeURIComponent(n)+"&");return l.length?l.substr(0,l.length-1):l};n.defaults.transformRequest=[function(e){return angular.isObject(e)&&"[object File]"!==String(e)?i(e):e}],r.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|mailto|app):/)}]),app.run(["$rootScope","$q","Users","Window","Progress",function(e,t,n,r,i){r.getWindow().hide(),e.$on("$stateChangeStart",function(){"undefined"!=typeof e.canceler&&e.canceler.resolve(),e.canceler=t.defer(),e.$emit("sidebar-views",[]),i.showLoading()}),"win32"===process.platform&&parseFloat(require("os").release(),10)>6.1&&r.getWindow().setMaximumSize(screen.availWidth+15,screen.availHeight+14),n.getUsers().then(function(t){if(t.length<=0)r.getWindow().hide(),r.listen("closed",function(){n.getUsers().then(function(t){t.length<=0?r.getWindow().close(!0):n.getFirstID().then(function(t){n.setCurrentUser(t.min),e.$emit("user"),r.getWindow().show()})})},r.getWindow("newuser.html",new_win));else{var i=function(){n.getFirstID().then(function(t){localStorage.currentUser=t.min,e.$emit("user")})};localStorage.currentUser?n.getUser(localStorage.currentUser).then(function(e){null==e&&i(),r.getWindow().show()}):(i(),r.getWindow().show())}})}]),app.filter("range",function(){return function(e){var t,n;switch(e.length){case 1:t=0,n=parseInt(e[0])-1;break;case 2:t=parseInt(e[0]),n=parseInt(e[1]);break;default:return e}for(var r=[],i=t;n>=i;i++)r.push(i);return r}}),app.directive("ngRightClick",function(e){return function(t,n,r){var i=e(r.ngRightClick);n.bind("contextmenu",function(e){t.$apply(function(){e.preventDefault(),i(t,{$event:e})})})}});