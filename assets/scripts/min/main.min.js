var app=angular.module("app",["ui.router","angles"]);app.config(["$urlRouterProvider","$stateProvider","$httpProvider","$compileProvider",function(e,n,t,r){pages.forEach(function(e){n.state(e.name,{url:"/"+e.name,templateUrl:"assets/templates/"+e.name+".html",controller:e.name+"Ctrl"})}),t.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8";var o=function(e){var n,t,r,i,a,s,l,c="";for(n in e)if(t=e[n],t instanceof Array)for(l=0;l<t.length;++l)a=t[l],r=n+"["+l+"]",s={},s[r]=a,c+=o(s)+"&";else if(t instanceof Object)for(i in t)a=t[i],r=n+"["+i+"]",s={},s[r]=a,c+=o(s)+"&";else void 0!==t&&null!==t&&(c+=encodeURIComponent(n)+"="+encodeURIComponent(t)+"&");return c.length?c.substr(0,c.length-1):c};t.defaults.transformRequest=[function(e){return angular.isObject(e)&&"[object File]"!==String(e)?o(e):e}],r.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|mailto|app):/)}]),app.run(["$rootScope","$q","Users","Window","Progress",function(e,n,t,r,o){r.getWindow().hide(),e.$on("$stateChangeStart",function(){"undefined"!=typeof e.canceler&&e.canceler.resolve(),"undefined"!=typeof e.reload_listener&&e.reload_listener(),console.log("changing"),e.canceler=n.defer(),o.showLoading()}),"win32"===process.platform&&parseFloat(require("os").release(),10)>6.1&&r.getWindow().setMaximumSize(screen.availWidth+15,screen.availHeight+14),t.getUsers().then(function(n){if(n.length<=0)r.getWindow().hide(),r.listen("closed",function(){t.getUsers().then(function(n){n.length<=0?r.getWindow().close(!0):t.getFirstID().then(function(n){t.setCurrentUser(n.min),e.$emit("reload",{user:!0}),r.getWindow().show()})})},r.getWindow("newuser.html",new_win));else{var o=function(){t.getFirstID().then(function(n){localStorage.currentUser=n.min,e.$emit("reload",{user:!0})})};localStorage.currentUser?t.getUser(localStorage.currentUser).then(function(e){null==e&&o(),r.getWindow().show()}):(o(),r.getWindow().show())}})}]),app.filter("range",function(){return function(e){var n,t;switch(e.length){case 1:n=0,t=parseInt(e[0])-1;break;case 2:n=parseInt(e[0]),t=parseInt(e[1]);break;default:return e}for(var r=[],o=n;t>=o;o++)r.push(o);return r}}),app.directive("ngRightClick",function(e){return function(n,t,r){var o=e(r.ngRightClick);t.bind("contextmenu",function(e){n.$apply(function(){e.preventDefault(),o(n,{$event:e})})})}});