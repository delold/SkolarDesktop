var app=angular.module("app",["ui.router","angles"]);app.config(["$urlRouterProvider","$stateProvider","$httpProvider","$compileProvider",function(e,t,n,r){pages.forEach(function(e){t.state(e.name,{url:"/"+e.name,templateUrl:"assets/templates/"+e.name+".html",controller:e.name+"Ctrl"})}),n.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8";var o=function(e){var t,n,r,i,a,s,l,c="";for(t in e)if(n=e[t],n instanceof Array)for(l=0;l<n.length;++l)a=n[l],r=t+"["+l+"]",s={},s[r]=a,c+=o(s)+"&";else if(n instanceof Object)for(i in n)a=n[i],r=t+"["+i+"]",s={},s[r]=a,c+=o(s)+"&";else void 0!==n&&null!==n&&(c+=encodeURIComponent(t)+"="+encodeURIComponent(n)+"&");return c.length?c.substr(0,c.length-1):c};n.defaults.transformRequest=[function(e){return angular.isObject(e)&&"[object File]"!==String(e)?o(e):e}],r.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|mailto|app):/)}]),app.run(["$rootScope","$q","Users","Window","Progress",function(e,t,n,r,o){r.getWindow().hide(),e.$on("$stateChangeStart",function(){"undefined"!=typeof e.canceler&&e.canceler.resolve(),e.canceler=t.defer(),e.$emit("sidebar-views",[]),o.showLoading()}),"win32"===process.platform&&parseFloat(require("os").release(),10)>6.1&&r.getWindow().setMaximumSize(screen.availWidth+15,screen.availHeight+14),n.getUsers().then(function(t){if(t.length<=0)r.getWindow().hide(),r.listen("closed",function(){n.getUsers().then(function(t){t.length<=0?r.getWindow().close(!0):n.getFirstID().then(function(t){n.setCurrentUser(t.min),e.$emit("reload",{user:!0}),r.getWindow().show()})})},r.getWindow("newuser.html",new_win));else{var o=function(){n.getFirstID().then(function(t){localStorage.currentUser=t.min,e.$emit("reload",{user:!0})})};localStorage.currentUser?n.getUser(localStorage.currentUser).then(function(e){null==e&&o(),r.getWindow().show()}):(o(),r.getWindow().show())}})}]),app.filter("range",function(){return function(e){var t,n;switch(e.length){case 1:t=0,n=parseInt(e[0])-1;break;case 2:t=parseInt(e[0]),n=parseInt(e[1]);break;default:return e}for(var r=[],o=t;n>=o;o++)r.push(o);return r}}),app.directive("ngRightClick",function(e){return function(t,n,r){var o=e(r.ngRightClick);n.bind("contextmenu",function(e){t.$apply(function(){e.preventDefault(),o(t,{$event:e})})})}});