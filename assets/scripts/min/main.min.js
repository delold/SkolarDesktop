var app=angular.module("app",["ui.router","angles"]),new_win={frame:!0,toolbar:!1,width:800,height:500,min_width:800,min_height:500,max_width:800,max_height:500,focus:!0,show:!1};app.config(["$urlRouterProvider","$stateProvider","$httpProvider",function(e,t,r){e.otherwise("/"),t.state("znamky",{url:"/",templateUrl:"assets/templates/znamky.html",controller:"znamkyCtrl"}),t.state("rozvrh",{url:"/rozvrh",templateUrl:"assets/templates/rozvrh.html",controller:"rozvrhCtrl"}),t.state("suplovani",{url:"/suplovani",templateUrl:"assets/templates/suplovani.html",controller:"suplovaniCtrl"}),t.state("plan",{url:"/plan",templateUrl:"assets/templates/plan.html",controller:"planCtrl"}),t.state("predmety",{url:"/predmety",templateUrl:"assets/templates/predmety.html",controller:"predmetyCtrl"}),t.state("vyuka",{url:"/vyuka",templateUrl:"assets/templates/vyuka.html",controller:"vyukaCtrl"}),t.state("absence",{url:"/absence",templateUrl:"assets/templates/absence.html",controller:"absenceCtrl"}),t.state("ukoly",{url:"/ukoly",templateUrl:"assets/templates/ukoly.html",controller:"ukolyCtrl"}),r.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8";var n=function(e){var t,r,l,a,o,s,u,i="";for(t in e)if(r=e[t],r instanceof Array)for(u=0;u<r.length;++u)o=r[u],l=t+"["+u+"]",s={},s[l]=o,i+=n(s)+"&";else if(r instanceof Object)for(a in r)o=r[a],l=t+"["+a+"]",s={},s[l]=o,i+=n(s)+"&";else void 0!==r&&null!==r&&(i+=encodeURIComponent(t)+"="+encodeURIComponent(r)+"&");return i.length?i.substr(0,i.length-1):i};r.defaults.transformRequest=[function(e){return angular.isObject(e)&&"[object File]"!==String(e)?n(e):e}]}]),app.run(["$rootScope","$q","Users","Window",function(e,t,r,n){e.$on("$stateChangeStart",function(){"undefined"!=typeof e.canceler&&e.canceler.resolve(),e.canceler=t.defer(),e.loaded=!1}),r.getUsers().then(function(t){if(t.length<=0)n.getWindow().hide(),n.listen("closed",function(){r.getUsers().then(function(t){t.length<=0?n.getWindow().close(!0):r.getFirstID().then(function(t){localStorage.currentUser=t.min,e.$broadcast("reload",{user:!0}),n.getWindow().show()})})},n.getWindow("newuser.html",new_win));else{var l=function(){r.getFirstID().then(function(t){localStorage.currentUser=t.min,e.$broadcast("reload",{user:!0})})};localStorage.currentUser?r.getUser(localStorage.currentUser).then(function(e){null==e&&l(),n.getWindow().show()}):(l(),n.getWindow().show())}})}]),app.filter("range",function(){return function(e){var t,r;switch(e.length){case 1:t=0,r=parseInt(e[0])-1;break;case 2:t=parseInt(e[0]),r=parseInt(e[1]);break;default:return e}for(var n=[],l=t;r>=l;l++)n.push(l);return n}});